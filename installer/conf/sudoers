# Begin sudo configuration for omsagent
Defaults:omsagent !requiretty
Defaults:omsagent lecture = never 

#update and restart syslog
omsagent ALL=(ALL) NOPASSWD: /opt/microsoft/omsconfig/Scripts/OMSRsyslog.post.sh
omsagent ALL=(ALL) NOPASSWD: /opt/microsoft/omsconfig/Scripts/OMSSysklog.post.sh
omsagent ALL=(ALL) NOPASSWD: /opt/microsoft/omsconfig/Scripts/OMSSyslog-ng.post.sh

#Service status
omsagent ALL=(ALL) NOPASSWD: /opt/microsoft/omsconfig/Scripts/OMSServiceStat.sh
omsagent ALL=(ALL) NOPASSWD: /opt/microsoft/omsconfig/Scripts/OMSServiceStatAll.sh

# AvailableUpdates
omsagent ALL=(ALL) NOPASSWD: /opt/microsoft/omsconfig/Scripts/OMSYumUpdates.sh
omsagent ALL=(ALL) NOPASSWD: /opt/microsoft/omsconfig/Scripts/OMSZypperUpdates.sh
omsagent ALL=(ALL) NOPASSWD: /opt/microsoft/omsconfig/Scripts/OMSAptUpdates.sh

# NPMD
omsagent ALL=(ALL) NOPASSWD: /opt/microsoft/omsconfig/Scripts/NPMAgentBinaryCap.sh

#restart omsagent daemon
omsagent ALL=(ALL) NOPASSWD: /opt/microsoft/omsagent/bin/service_control

#Inspect Docker containers (filter_docker_log.rb)
omsagent ALL=(ALL) NOPASSWD: /usr/bin/docker inspect *

#run tailfilereader.rb
omsagent ALL=(ALL) NOPASSWD: /opt/microsoft/omsagent/ruby/bin/ruby /opt/microsoft/omsagent/bin/tailfilereader.rb *

#run hdinsightmanifestreader.rb
omsagent ALL=(ALL) NOPASSWD: /opt/microsoft/omsagent/ruby/bin/ruby /opt/microsoft/omsagent/bin/hdinsightmanifestreader.rb

# Enable nxOMSAuditdResource
omsagent ALL=(ALL) NOPASSWD: /opt/microsoft/omsconfig/Scripts/OMSAuditdPlugin.sh

#run update management commands
omsagent ALL=(ALL) NOPASSWD: /usr/bin/apt-get dist-upgrade *
omsagent ALL=(ALL) NOPASSWD: /usr/bin/apt-get update
omsagent ALL=(ALL) NOPASSWD: /usr/bin/apt-get upgrade *
omsagent ALL=(ALL) NOPASSWD: /usr/bin/apt-get * update
omsagent ALL=(ALL) NOPASSWD: /usr/bin/apt-get * dist-upgrade
omsagent ALL=(ALL) NOPASSWD: /usr/bin/apt-get * upgrade
omsagent ALL=(ALL) NOPASSWD: /usr/bin/apt-get -y --only-upgrade true install *
omsagent ALL=(ALL) NOPASSWD: /usr/bin/apt-get -y --only-upgrade true -s install *

omsagent ALL=(ALL) NOPASSWD: /usr/bin/yum update –-assumeno
omsagent ALL=(ALL) NOPASSWD: /usr/bin/yum -q check-update
omsagent ALL=(ALL) NOPASSWD: /usr/bin/yum check-updates
omsagent ALL=(ALL) NOPASSWD: /usr/bin/yum -y upgrade
omsagent ALL=(ALL) NOPASSWD: /usr/bin/yum -y update
omsagent ALL=(ALL) NOPASSWD: /usr/bin/yum -y upgrade *
omsagent ALL=(ALL) NOPASSWD: /usr/bin/yum -y update *
omsagent ALL=(ALL) NOPASSWD: /usr/bin/yum update *
omsagent ALL=(ALL) NOPASSWD: /usr/bin/yum upgrade *

omsagent ALL=(ALL) NOPASSWD: /bin/yum update -–assumeno
omsagent ALL=(ALL) NOPASSWD: /bin/yum -q check-update
omsagent ALL=(ALL) NOPASSWD: /bin/yum check-updates
omsagent ALL=(ALL) NOPASSWD: /bin/yum -y update
omsagent ALL=(ALL) NOPASSWD: /bin/yum -y upgrade
omsagent ALL=(ALL) NOPASSWD: /bin/yum -y update *
omsagent ALL=(ALL) NOPASSWD: /bin/yum -y upgrade *
omsagent ALL=(ALL) NOPASSWD: /bin/yum upgrade *
omsagent ALL=(ALL) NOPASSWD: /bin/yum update *

# End sudo configuration for omsagent
